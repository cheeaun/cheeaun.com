<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<title>Smart icon sizing &ndash; Lim Chee Aun</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="preload" href="/assets/fonts/WorkSans-Regular.woff2" as="font" type="font/woff2">
<style>html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body,button,html,input,select,textarea{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}code,kbd,pre,samp,var{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace}a{text-decoration:none}a:hover{text-decoration:underline}a img,img{border:0}h1,h2,h3,h4,h5,h6{margin:0;padding:0}p{padding:0}caption{font-weight:700;padding:.5em}table{border-collapse:collapse;border-spacing:0}td,th{vertical-align:top}ol,ul{padding:0}dt{font-weight:700}dfn{font-style:normal;font-weight:700}abbr{border-bottom:1px dotted}form{margin:0;padding:0}legend{font-weight:700}button,input,select,textarea{font-size:1em;max-width:100%;vertical-align:middle;margin:0}textarea{overflow:auto}button,input.button{padding:0 .5em;overflow:visible}article,aside,details,figcaption,figure,footer,header,hgroup,nav,section,summary{display:block}@font-face{font-family:'Work Sans';font-style:normal;font-weight:400;font-display:swap;src:url(/assets/fonts/WorkSans-Regular.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:italic;font-weight:400;font-display:swap;src:url(/assets/fonts/WorkSans-Italic.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:normal;font-weight:500;font-display:swap;src:url(/assets/fonts/WorkSans-Medium.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:italic;font-weight:500;font-display:swap;src:url(/assets/fonts/WorkSans-MediumItalic.woff2) format('woff2')}body,html{overflow-x:hidden}body{color:#444;background-color:#fff;padding:0;margin:0;font-family:'Work Sans',-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px}a{color:#0b62a0;padding:.25em;margin:-.25em;border-radius:3px;text-decoration:underline;text-underline-offset:1px;text-decoration-color:#0b62a061}a:hover{color:#000;text-decoration:underline}a:focus{color:#000;background-color:rgba(0,0,0,.08);text-decoration:none}b,dt,strong,th{font-weight:500}li,p{line-height:1.5em}ol,ul{margin-left:1.35em}img,video{max-width:100%;height:auto}p strong{color:#000}p a strong{color:inherit}code,kbd,samp,var{background-color:#fafafa;font-size:.9em}:not(pre)>code,:not(pre)>kbd,:not(pre)>samp,:not(pre)>var{color:#08632c;background-color:transparent}:not(pre)>code:before,:not(pre)>kbd:before,:not(pre)>samp:before,:not(pre)>var:before{content:'`';opacity:.5}:not(pre)>code:after,:not(pre)>kbd:after,:not(pre)>samp:after,:not(pre)>var:after{content:'`';opacity:.5}pre code{background-color:auto}#container{position:relative;margin:auto;max-width:40em;word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}#container pre{word-wrap:normal;overflow-wrap:normal;word-break:normal}header{text-align:center;padding:50px}header h1{margin:0}header h1 a{display:inline-block;border-radius:50%}header h1 a:focus{transform:scale(.97)}header svg{vertical-align:top}header h1 a:focus svg{-webkit-filter:brightness(.9);filter:brightness(.9)}#content{padding:0 1em}#content h1{font-size:44px;line-height:1.2em;margin:0 0 .5em;text-align:center;letter-spacing:-.05em;font-weight:500}#content header{text-align:left;padding:0;background-image:none}#content article h1+time{display:block;text-align:center;padding:0 0 4em;color:#767676}#content h2{font-size:32px;letter-spacing:-.05em;font-weight:500;color:#333;margin:0 0 .75em;line-height:1.2em}#content *+h2{margin-top:1.5em}#content article.summary h2{margin-bottom:.5em}#content article.summary time{color:#767676;display:block;margin:0 0 .75em}#content p{margin:0 0 1em}#content ol,#content ul{margin-bottom:1em}#content dt{margin-bottom:1em;color:#000}#content dd{margin-left:1.35em}#content pre{margin:0 0 1em;border-radius:3px;padding:1em;background-color:#f3f3f3;font-size:.9em;line-height:1.5em;overflow:auto}#content pre code,#content pre kbd,#content pre samp,#content pre var{background-color:inherit}#content pre em,#content pre strong{color:red;font-style:normal}#content pre em.remark{color:#767676;font-style:normal}#content pre var{color:#060;font-style:normal}#content blockquote{border-left:3px solid #999;padding:.6em 0 .6em 1em;margin:0 0 3em}#content blockquote p:last-child{margin-bottom:0}#content table{margin:0 auto 1em;border:1px solid #ddd}#content table td,#content table th{padding:.5em .9em}#content table thead th{text-align:center;background-color:#eee}#content table tbody th{text-align:left}#content table tbody tr:nth-child(even){background-color:#fafafa}#content aside{padding:5px 10px}#content aside,#content aside p{line-height:28px;background-color:#fff5d9;text-align:right}.pinyin{font-style:italic}.remark{font-style:italic;color:#767676}:lang(ms){font-style:italic}#content figure{text-align:center;margin:1em -1em}#content *+figure{margin-top:2em;margin-bottom:2em}#content time+figure{margin-top:0}#content figure.image-aside{margin:0 0 1em 1em;padding:10px;background-color:rgba(255,255,255,.5);float:right;clear:right}#content figure img.large{max-width:100vw;position:relative;left:50%;transform:translateX(-50%)}#content blockquote figure img.large{left:calc(50% - 10px)}#content figure a{padding:0;margin:0;border:0}#content figure a img{vertical-align:bottom}#content figure a:focus img{-webkit-filter:brightness(.9);filter:brightness(.9)}#content video{display:block;margin:auto}#content hr{border:0;border-top:1px solid #ccc;margin:2em}footer{padding:50px;text-align:center;color:#767676}footer a{color:inherit}footer nav ul{list-style:none;display:block;margin:0 0 20px}footer nav ul li{display:inline}footer nav ul li a{margin:0 .25em}#blog-archives ul{list-style:none;margin:0 -1em}#blog-archives ul li{padding:.5em 1em}#blog-archives ul li:nth-child(even){background-color:#fafafa}#blog-archives time{float:right;margin-left:1em}@-ms-viewport{width:device-width;zoom:1.0}@viewport{width:device-width;zoom:1.0}@media print{footer{display:none}#content a[href]{text-decoration:none}#content a[href]:after{content:" (" attr(href) ") ";font-size:90%}blockquote,figure,img,li,p,pre,video{break-inside:avoid;page-break-inside:avoid}h2,h3{break-after:avoid-page;page-break-after:avoid}p{orphans:2;widows:2}}</style>
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Smart icon sizing">
<meta name="description" property="og:description" content="I&#x27;ve spent the last few days updating the Phoenity theme for Mozilla Firefox 1.0 PR. Again, I found few more interface glitches during the process.â€¦">

<link rel="alternate" href="/blog/feed.xml" type="application/atom+xml" title="cheeaunblog">
<link rel="manifest" href="/manifest.webmanifest">
<link rel="apple-touch-icon" href="/assets/images/icon-192.png">
<meta name="theme-color" content="#fff"><div id="container">
  <header role="banner">
    <h1>
      <a href="/"><svg width="120" height="120" viewBox="0 0 225 225">
    <title>Lim Chee Aun</title>
    <circle cx="112.5" cy="112.5" r="112.5" fill="#fa8e01"/>
    <path fill="#fff" d="M104.8 127.1c-.8.4-1.9.9-3 1.3-1.2.5-2.4.9-3.6 1.2-1.2.3-2.3.5-3.3.5-3 0-5.3-1.5-7-4.7-1.6-3.1-2.5-7.8-2.5-13.9 0-4.3.4-7.6 1.2-9.9.7-2.3 1.8-4 3.2-4.9 1.3-1 2.9-1.4 4.7-1.3 1.2-.1 2.7.1 4.4.5 1.8.4 3.7 1.1 5.7 2.2l3.3-15.5c-2.7-.9-5.3-1.5-8-1.9-2.5-.3-4.8-.5-6.8-.5-5.8 0-10.7 1.1-14.8 3.3-4.1 2.2-7.2 5.7-9.4 10.7-2.1 4.8-3.2 11.2-3.3 19.2 0 10.8 2.1 18.8 6.3 24 4.1 5.2 10.2 7.8 18.3 7.8 2.2 0 4.4-.1 6.6-.5 2.2-.3 4.3-.8 6.3-1.4 2-.6 3.7-1.3 5.2-2.1l-3.5-14.1zm54.5 16.9c-.2-1.8-.5-3.8-.8-6.1-.2-2.2-.4-4.5-.6-7-.2-2.4-.3-4.9-.3-7.3v-23c0-2.9-.3-5.6-1-8.1-.6-2.5-1.8-4.7-3.3-6.6-1.6-1.9-3.9-3.4-6.7-4.5-2.8-1-6.3-1.6-10.6-1.6-3.5 0-7.1.4-10.7 1.1-3.6.8-7.3 1.8-11 3.1l3.7 14c3.1-1.2 5.8-2.1 8.2-2.8 2.5-.6 4.5-.9 6.1-.9 1.8 0 3.3.5 4.4 1.4 1.2 1 1.8 2.6 1.8 4.9v7.7c-3.8.3-7.2.8-10.4 1.6s-6 1.9-8.4 3.3c-2.4 1.5-4.3 3.4-5.7 5.8-1.3 2.3-2 5.1-2 8.5 0 2.3.2 4.5.7 6.7.5 2.1 1.3 4 2.4 5.6 1.1 1.7 2.5 3 4.1 3.9 1.7 1 3.6 1.5 5.9 1.5 2.6 0 4.9-.4 6.9-1.2 2.1-.8 3.9-1.8 5.6-2.9 1.6-1.1 3.1-2.2 4.6-3.3l1.5 6.2h15.6zm-20.7-14.9c-.9.8-1.8 1.4-2.6 1.9s-1.6.7-2.5.7c-1.4 0-2.5-.6-3.4-1.8-.8-1.2-1.3-2.8-1.3-5 0-1.7.5-2.9 1.4-3.8 1-.8 2.2-1.4 3.7-1.7 1.5-.3 3-.6 4.7-.7v10.4z"/>
    <circle cx="112.5" cy="112.5" r="83.7" fill="none" stroke="#fff" stroke-width="20.1"/>
  </svg>
  </a>
    </h1>
  </header>
  <div id="content">
    <article itemscope itemtype="http://schema.org/BlogPosting">
      <header><h1 itemprop="heading">Smart icon sizing</h1><time datetime="2004-09-30" class="meta date" itemprop="datePublished">30 September 2004</time></header><div itemprop="articleBody"><p>I&apos;ve spent the last few days updating the Phoenity theme for Mozilla Firefox 1.0 PR. Again, I found <a href="http://bugzilla.mozilla.org/show_bug.cgi?id=257480" title="Bug 257480 - theme style and icon cleanup - spit &amp; polish">few more interface glitches</a> during the process. I also had some problems here and there, as I struggle to cope with the changes in Winstripe theme&apos;s codes. One of them is <strong>icon sizing</strong>.</p><figure><img src="/blog/images/screenshots/firefox/throbber_large_menubar.png" alt="incorrect large size of the throbber positioned to the right corner of the menubar" width="380" height="90" loading="lazy"></figure><p>Before this, the Phoenity theme implements large and small sizes for the throbber, so do most other themes. When Winstripe is introduced to the Firefox interface, the throbber no longer has a large dimension and is positioned way up to the right corner of the menubar. This means <em>bad news</em> because for my theme, the throbber will be in large size, in large-icon mode, thus increasing the menubar&apos;s height. In other words, it looks <em>ugly</em>.</p><figure><img src="/blog/images/screenshots/firefox/throbber_small_menubar.png" alt="correct small size of the throbber positioned to the right corner of the menubar" width="380" height="90" loading="lazy"></figure><p>So, I kept thinking about it. Should I remove the large throbber? And maybe make it available from a sub-skin? No, that would be too redundant and I still want to keep the throbber that way, changing sizes according to the icon modes. I wonder if only there is a way for the size of the throbber to change <em>proportionally</em> to the height of the toolbar. Of course, this idea is <strong>impossible</strong> to be done merely with CSS. I have no choice but to think of other ways then.</p><p>My first solution is this:</p><pre><code>#toolbar-menubar #menubar-items + toolbarspring + #throbber-box &gt; #navigator-throbber,
#toolbar-menubar #wrapper-menubar-items + toolbarpaletteitem[type=&quot;spring&quot;] + #wrapper-throbber-box #throbber-box &gt; #navigator-throbber{
list-style-image: url(chrome://browser/skin/throbber_small.gif);
}

#toolbar-menubar #menubar-items + toolbarspring + #throbber-box &gt; #navigator-throbber[busy=&quot;true&quot;],
#toolbar-menubar #wrapper-menubar-items + toolbarpaletteitem[type=&quot;spring&quot;] + #wrapper-throbber-box #throbber-box &gt; #navigator-throbber[busy=&quot;true&quot;]{
list-style-image: url(chrome://browser/skin/throbber_small_loading.gif);
}
</code></pre><figure><img src="/blog/images/screenshots/firefox/throbber_large_location_bar_menubar.png" alt="incorrect large size of the throbber when the location bar is dragged next to it on the menubar" width="380" height="90" loading="lazy"></figure><p>The codes above makes the throbber small if it&apos;s positioned next to the menubar items and a flexible space, which is the default set for first-time launch of Firefox. If it&apos;s not positioned that way, then the throbber would be sizeable. Pretty good, but it&apos;s <em>too dependent</em> on the position of the elements on the toolbar and will not work well if other items, except toolbar buttons, are dragged there.</p><p>My second solution is this:</p><pre><code>#toolbar-menubar #throbber-box &gt; #navigator-throbber{
list-style-image: url(chrome://browser/skin/throbber_small.gif);
}

#toolbar-menubar #throbber-box &gt; #navigator-throbber[busy=&quot;true&quot;]{
list-style-image: url(chrome://browser/skin/throbber_small_loading.gif);
}
</code></pre><figure><img src="/blog/images/screenshots/firefox/throbber_small_home_toolbar_button_menubar.png" alt="incorrect small size of the throbber when the Home toolbar button is dragged next to it on the menubar" width="380" height="90" loading="lazy"></figure><p>This time, the codes will make the throbber small if it&apos;s positioned anywhere on the menubar. But what if I drag the toolbar buttons to the menubar? Then logically, the throbber <em>should</em> be sizeable and <em>not</em> in fixed small size anymore. I do have a choice to ignore this, but I&apos;m afraid some users will get confused treating it as a bug.</p><figure><img src="/blog/images/screenshots/firefox/throbber_large_location_bar_go_button_toolbar.png" alt="incorrect large size of the throbber positioned next to the location bar and Go button, not on the menubar but another toolbar instead" width="380" height="90" loading="lazy"></figure><p>Besides, this implementation is limited <em>only</em> to the menubar and cannot work on other additional toolbars. On my Firefox, I have added a new toolbar for the location field and Go button. Dragging the throbber there will unintentionally increase the toolbar&apos;s height in large-icon mode. Again, it looks ugly.</p><p>My third solution is this:</p><pre><code>toolbar:not([currentset*=&quot;-button&quot;]) #throbber-box &gt; #navigator-throbber{
list-style-image: url(chrome://browser/skin/throbber_small.gif);
}

toolbar:not([currentset*=&quot;-button&quot;]) #throbber-box &gt; #navigator-throbber[busy=&quot;true&quot;] {
list-style-image: url(chrome://browser/skin/throbber_small_loading.gif);
}
</code></pre><figure><img src="/blog/images/screenshots/firefox/throbber_large_home_toolbar_button_menubar.png" alt="correct large size of the throbber when the Home toolbar button is dragged next to it on the menubar" width="380" height="90" loading="lazy"></figure><p>This is also my final solution because it introduces a <em>smarter</em> icon sizing mechanism. The codes above will make the throbber small if there are <strong>no</strong> toolbar buttons on the toolbar. It works by detecting the contents of the toolbar, via the values of the <code>currentset</code> attribute. By default, the throbber will be sizeable. If the <code>currentset</code> attribute <strong>doesn&apos;t</strong> contain partial values of <code>-button</code>, the throbber will be small, so that the toolbar doesn&apos;t grow unnecessarily.</p><figure><img src="/blog/images/screenshots/firefox/throbber_small_location_bar_go_button_toolbar.png" alt="correct small size of the throbber positioned next to the location bar and Go button" width="380" height="90" loading="lazy"></figure><p>However, there are few tiny glitches. Firefox&apos;s interface doesn&apos;t seem to be dynamic enough, for the icon sizing to take place smoothly. Sometimes, it takes few milliseconds to re-adjust the rendering. Another glitch that might happen is due to compatibility with extensions which provide additional toolbar buttons. Some extensions use a different value for <code>currentset</code>, instead of <code>extension-button</code>, therefore breaks the mechanism.</p><p>For now, this is the best solution I know. I&apos;ve also implemented this mechanism to the Go button for my Phoenity theme version 1.3, released three days ago. Anyway, I hope that this could be helpful to other Firefox theme designers too.</p></div>
      </article>
  </div>
  <footer>
    <nav>
      <ul>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/projects/">Projects</a></li>
        <li><a href="/about/">About</a></li>
      </ul>
    </nav>
  </footer></div>
<script>
  window.onload = function () {
    var $figures = document.getElementsByTagName('figure');
    if (!$figures.length) return;
    var asideImages = function () {
      for (var i = 0, l = $figures.length; i < l; i++) {
        var $figure = $figures[i];
        var $images = $figure.getElementsByTagName('img');
        if ($images.length == 1) {
          var $img = $images[0];
          var width = Math.max($img.naturalWidth, $img.width);
          if (width <= 280 && (width / $figure.parentNode.offsetWidth * 100 < 50)) {
            $figure.className = 'image-aside';
          } else if ($figure.className) {
            $figure.className = '';
          }
        }
      }
    };
    asideImages();
    window.onresize = asideImages;
  };
  if (navigator.serviceWorker) {
    window.addEventListener('load', function () {
      navigator.serviceWorker.register('/sw.js', {
        scope: '/'
      });
    });
  }
</script>
<script data-goatcounter="https://cheeaun.goatcounter.com/count" async src="//gc.zgo.at/count.v2.js" crossorigin="anonymous" integrity="sha384-PeYXrhTyEaBBz91ANMgpSbfN1kjioQNPHNDbMvevUVLJoWrVEjDCpKb71TehNAlj"></script>
<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "56009c05c6234036a216843af8874520"}'></script><!-- End Cloudflare Web Analytics -->
</html>