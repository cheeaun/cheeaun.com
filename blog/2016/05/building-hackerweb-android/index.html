<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<title>Building HackerWeb for Android &ndash; Lim Chee Aun</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="preload" href="/assets/fonts/WorkSans-Regular.woff2" as="font" type="font/woff2">
<style>html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body,button,html,input,select,textarea{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}code,kbd,pre,samp,var{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace}a{text-decoration:none}a:hover{text-decoration:underline}a img,img{border:0}h1,h2,h3,h4,h5,h6{margin:0;padding:0}p{padding:0}caption{font-weight:700;padding:.5em}table{border-collapse:collapse;border-spacing:0}td,th{vertical-align:top}ol,ul{padding:0}dt{font-weight:700}dfn{font-style:normal;font-weight:700}abbr{border-bottom:1px dotted}form{margin:0;padding:0}legend{font-weight:700}button,input,select,textarea{font-size:1em;max-width:100%;vertical-align:middle;margin:0}textarea{overflow:auto}button,input.button{padding:0 .5em;overflow:visible}article,aside,details,figcaption,figure,footer,header,hgroup,nav,section,summary{display:block}@font-face{font-family:'Work Sans';font-style:normal;font-weight:400;font-display:swap;src:url(/assets/fonts/WorkSans-Regular.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:italic;font-weight:400;font-display:swap;src:url(/assets/fonts/WorkSans-Italic.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:normal;font-weight:500;font-display:swap;src:url(/assets/fonts/WorkSans-Medium.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:italic;font-weight:500;font-display:swap;src:url(/assets/fonts/WorkSans-MediumItalic.woff2) format('woff2')}body,html{overflow-x:hidden}body{color:#444;background-color:#fff;padding:0;margin:0;font-family:'Work Sans',-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px}a{color:#0b62a0;padding:.25em;margin:-.25em;border-radius:3px;text-decoration:underline;text-underline-offset:1px;text-decoration-color:#0b62a061}a:hover{color:#000;text-decoration:underline}a:focus{color:#000;background-color:rgba(0,0,0,.08);text-decoration:none}b,dt,strong,th{font-weight:500}li,p{line-height:1.5em}ol,ul{margin-left:1.35em}img,video{max-width:100%;height:auto;background-color:#fafafa}p strong{color:#000}p a strong{color:inherit}code,kbd,samp,var{background-color:#fafafa;font-size:.9em}:not(pre)>code,:not(pre)>kbd,:not(pre)>samp,:not(pre)>var{color:#08632c;background-color:transparent}:not(pre)>code:before,:not(pre)>kbd:before,:not(pre)>samp:before,:not(pre)>var:before{content:'`';opacity:.5}:not(pre)>code:after,:not(pre)>kbd:after,:not(pre)>samp:after,:not(pre)>var:after{content:'`';opacity:.5}pre code{background-color:auto}#container{position:relative;margin:auto;max-width:40em;word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}#container pre{word-wrap:normal;overflow-wrap:normal;word-break:normal}header{text-align:center;padding:50px}header h1{margin:0}header h1 a{display:inline-block;border-radius:50%}header h1 a:focus{transform:scale(.97)}header svg{vertical-align:top}header h1 a:focus svg{-webkit-filter:brightness(.9);filter:brightness(.9)}#content{padding:0 1em}#content h1{font-size:44px;line-height:1.2em;margin:0 0 .5em;text-align:center;letter-spacing:-.05em;font-weight:500}#content header{text-align:left;padding:0;background-image:none}#content article h1+time{display:block;text-align:center;padding:0 0 4em;color:#767676}#content h2{font-size:32px;letter-spacing:-.05em;font-weight:500;color:#333;margin:0 0 .75em;line-height:1.2em}#content *+h2{margin-top:1.5em}#content article.summary h2{margin-bottom:.5em}#content article.summary time{color:#767676;display:block;margin:0 0 .75em}#content p{margin:0 0 1em}#content ol,#content ul{margin-bottom:1em}#content dt{margin-bottom:1em;color:#000}#content dd{margin-left:1.35em}#content pre{margin:0 0 1em;border-radius:3px;padding:1em;background-color:#f3f3f3;font-size:.9em;line-height:1.5em;overflow:auto}#content pre code,#content pre kbd,#content pre samp,#content pre var{background-color:inherit}#content pre em,#content pre strong{color:red;font-style:normal}#content pre em.remark{color:#767676;font-style:normal}#content pre var{color:#060;font-style:normal}#content blockquote{border-left:3px solid #999;padding:.6em 0 .6em 1em;margin:0 0 2em}#content blockquote p:last-child{margin-bottom:0}#content table{margin:0 auto 1em;border:1px solid #ddd}#content table td,#content table th{padding:.5em .9em}#content table thead th{text-align:center;background-color:#eee}#content table tbody th{text-align:left}#content table tbody tr:nth-child(even){background-color:#fafafa}#content aside{padding:5px 10px}#content aside,#content aside p{line-height:28px;background-color:#fff5d9;text-align:right}.pinyin{font-style:italic}.remark{font-style:italic;color:#767676}:lang(ms){font-style:italic}#content figure{text-align:center;margin:1em -1em}#content *+figure{margin-top:2em;margin-bottom:2em}#content time+figure{margin-top:0}#content figure.image-aside{margin:0 0 1em 1em;padding:10px;background-color:rgba(255,255,255,.5);float:right;clear:right}#content figure img.large{max-width:100vw;position:relative;left:50%;transform:translateX(-50%)}#content blockquote figure img.large{left:calc(50% - 10px)}#content figure a{padding:0;margin:0;border:0}#content figure a img{vertical-align:bottom}#content figure a:focus img{-webkit-filter:brightness(.9);filter:brightness(.9)}#content video{display:block;margin:auto}#content hr{border:0;border-top:1px solid #ccc;margin:2em}footer{padding:50px;text-align:center;color:#767676}footer a{color:inherit}footer nav ul{list-style:none;display:block;margin:0 0 20px}footer nav ul li{display:inline}footer nav ul li a{margin:0 .25em}#blog-archives ul{list-style:none;margin:0 -1em}#blog-archives ul li{padding:.5em 1em}#blog-archives ul li:nth-child(even){background-color:#fafafa}#blog-archives time{float:right;margin-left:1em}@-ms-viewport{width:device-width;zoom:1.0}@viewport{width:device-width;zoom:1.0}@media print{footer{display:none}#content a[href]{text-decoration:none}#content a[href]:after{content:" (" attr(href) ") ";font-size:90%}blockquote,figure,img,li,p,pre,video{break-inside:avoid;page-break-inside:avoid}h2,h3{break-after:avoid-page;page-break-after:avoid}p{orphans:2;widows:2}}</style>
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Building HackerWeb for Android">
<meta name="description" property="og:description" content="On March 1, I introduced HackerWeb for iOS. It was briefly featured on Product Hunt, React Native Community Facebook Group, Tech In Asia, andâ€¦">
<meta property="og:image" content="https://cheeaun.com/blog/images/photos/objects/hackerweb-android-hand-mockup.jpg">
<link rel="alternate" href="/blog/feed.xml" type="application/atom+xml" title="cheeaunblog">
<link rel="manifest" href="/manifest.webmanifest">
<link rel="apple-touch-icon" href="/assets/images/icon-192.png">
<meta name="theme-color" content="#fff"><div id="container">
  <header role="banner">
    <h1>
      <a href="/"><svg width="120" height="120" viewBox="0 0 225 225">
    <title>Lim Chee Aun</title>
    <circle cx="112.5" cy="112.5" r="112.5" fill="#fa8e01"/>
    <path fill="#fff" d="M104.8 127.1c-.8.4-1.9.9-3 1.3-1.2.5-2.4.9-3.6 1.2-1.2.3-2.3.5-3.3.5-3 0-5.3-1.5-7-4.7-1.6-3.1-2.5-7.8-2.5-13.9 0-4.3.4-7.6 1.2-9.9.7-2.3 1.8-4 3.2-4.9 1.3-1 2.9-1.4 4.7-1.3 1.2-.1 2.7.1 4.4.5 1.8.4 3.7 1.1 5.7 2.2l3.3-15.5c-2.7-.9-5.3-1.5-8-1.9-2.5-.3-4.8-.5-6.8-.5-5.8 0-10.7 1.1-14.8 3.3-4.1 2.2-7.2 5.7-9.4 10.7-2.1 4.8-3.2 11.2-3.3 19.2 0 10.8 2.1 18.8 6.3 24 4.1 5.2 10.2 7.8 18.3 7.8 2.2 0 4.4-.1 6.6-.5 2.2-.3 4.3-.8 6.3-1.4 2-.6 3.7-1.3 5.2-2.1l-3.5-14.1zm54.5 16.9c-.2-1.8-.5-3.8-.8-6.1-.2-2.2-.4-4.5-.6-7-.2-2.4-.3-4.9-.3-7.3v-23c0-2.9-.3-5.6-1-8.1-.6-2.5-1.8-4.7-3.3-6.6-1.6-1.9-3.9-3.4-6.7-4.5-2.8-1-6.3-1.6-10.6-1.6-3.5 0-7.1.4-10.7 1.1-3.6.8-7.3 1.8-11 3.1l3.7 14c3.1-1.2 5.8-2.1 8.2-2.8 2.5-.6 4.5-.9 6.1-.9 1.8 0 3.3.5 4.4 1.4 1.2 1 1.8 2.6 1.8 4.9v7.7c-3.8.3-7.2.8-10.4 1.6s-6 1.9-8.4 3.3c-2.4 1.5-4.3 3.4-5.7 5.8-1.3 2.3-2 5.1-2 8.5 0 2.3.2 4.5.7 6.7.5 2.1 1.3 4 2.4 5.6 1.1 1.7 2.5 3 4.1 3.9 1.7 1 3.6 1.5 5.9 1.5 2.6 0 4.9-.4 6.9-1.2 2.1-.8 3.9-1.8 5.6-2.9 1.6-1.1 3.1-2.2 4.6-3.3l1.5 6.2h15.6zm-20.7-14.9c-.9.8-1.8 1.4-2.6 1.9s-1.6.7-2.5.7c-1.4 0-2.5-.6-3.4-1.8-.8-1.2-1.3-2.8-1.3-5 0-1.7.5-2.9 1.4-3.8 1-.8 2.2-1.4 3.7-1.7 1.5-.3 3-.6 4.7-.7v10.4z"/>
    <circle cx="112.5" cy="112.5" r="83.7" fill="none" stroke="#fff" stroke-width="20.1"/>
  </svg>
  </a>
    </h1>
  </header>
  <div id="content">
    <article itemscope itemtype="http://schema.org/BlogPosting">
      <header><h1 itemprop="heading">Building HackerWeb for Android</h1><time datetime="2016-05-02" class="meta date" itemprop="datePublished">2 May 2016</time></header><div itemprop="articleBody"><figure><img src="/blog/images/photos/objects/hackerweb-android-hand-mockup.jpg" alt="Mockup of HackerWeb Android app" width="800" height="533"></figure><p>On <a href="https://twitter.com/cheeaun/status/704697299922919424">March 1</a>, I <a href="http://cheeaun.com/blog/2016/03/building-hackerweb-ios/">introduced HackerWeb for iOS</a>. It was <em>briefly</em> featured on <a href="https://www.producthunt.com/tech/hackerweb">Product Hunt,</a> <a href="https://www.facebook.com/groups/react.native.community/permalink/730638060405108/">React Native Community Facebook Group</a>, <a href="https://www.techinasia.com/talk/building-hackerweb-ios">Tech In Asia</a>, and even listed on the <a href="http://facebook.github.io/react-native/showcase.html">React Native Showcase</a> page.</p><p>As always, I love good feedbacks:</p><blockquote>
<p>Enjoying Hackerweb an iOS Hacker News client by @cheeaun.</p>
<p>&#x2014;<a href="https://twitter.com/_fadhli/status/704835167005704193">Fadhli Rahim</a></p>
</blockquote><blockquote>
<p>HackerWeb by @cheeaun is on the App Store&#x2026; Classy way to, err, read Hacker News. Solves 1st world problems, etc etc</p>
<p>&#x2014;<a href="https://twitter.com/chuyeow/status/704858962374430722">Chu Yeow</a></p>
</blockquote><blockquote>
<p>As a beta user of @hackerwebapp&#xA0;Hacker News Reader on iOS, it&#x2019;s definitely worth the dollar. Great job @cheeaun&#xA0;:-)</p>
<p>&#x2014;<a href="https://twitter.com/jin_/status/704949161540657153">Jin</a></p>
</blockquote><blockquote>
<p>Love this! &#x201C;&#x2026;I limit the number of stories to 60. No more, no less. Done with the stories? Go back to your life &#x1F609;&#x201D;</p>
<p>&#x2014;<a href="https://twitter.com/dominic/status/707775108614467584">Dominic Ee</a></p>
</blockquote><blockquote>
<p>Kudos to @cheeaun for building the elegant HackerWeb app and documenting the process behind it</p>
<p>&#x2014;<a href="https://twitter.com/donohoe/status/707919680976130050">Michael Donohoe</a></p>
</blockquote><p>50 days later, after <a href="https://github.com/cheeaun/hackerweb-native/compare/50116220e7fed04f3bbca808570ca2498065c939...1b5da7cc1be66ba92a19a78e77b6bae49f167b4e">51 commits, 82 changed files with 1,323 additions and 336 deletions</a>, I released HackerWeb for Android.</p><h2>A slow start</h2><p>At first, I have no serious plans on porting the app to Android at all. Two days after the iOS launch, I was kind of curious and want to try out how easy it is to run a React Native app on the Android emulator. I mean, if <a href="https://code.facebook.com/posts/1189117404435352/react-native-for-android-how-we-built-the-first-cross-platform-react-native-app/">Facebook can do it</a>, why not give it a try myself?</p><figure><img src="/blog/images/screenshots/software/hackerweb-android-genymotion@2x.png" alt="Screenshot of HackerWeb app running on Android inside the Genymotion emulator" width="410" height="669" loading="lazy"></figure><p>It was <a href="https://twitter.com/cheeaun/status/705770568696500225">mind-blowing</a>. I totally did not expect that with just few lines of code changes, the whole app is <em>almost</em> visually done.</p><p>The screenshot shows a straight port of the iOS app running on the Genymotion Android emulator. The navigation bar is missing because <a href="http://facebook.github.io/react-native/docs/navigatorios.html#content"><code>NavigatorIOS</code></a> doesn&apos;t work there and I didn&apos;t even bother adding the cross-platform <a href="http://facebook.github.io/react-native/docs/navigator.html#content"><code>Navigator</code></a> component yet.</p><p>Honestly, I wasn&apos;t too confident with the port because about a month ago, React Native has a known issue with <a href="https://productpains.com/post/react-native/get-android-to-feature-parity-with-ios">getting Android to feature parity with iOS</a> (now fixed in version 0.24.0).</p><p>In fact, my main issue is actually the Android emulator itself which I always find it <strong>very</strong> slow. I remember the first time I was trying it out, it took me more than an hour to set up the emulator. Until <a href="https://www.genymotion.com/">Genymotion</a> comes along which makes things <em>much</em> faster, though it <a href="https://twitter.com/cheeaun/status/705748310087192576">doesn&apos;t support HiDPI displays</a> yet. On April 7, <a href="http://android-developers.blogspot.sg/2016/04/android-studio-2-0.html">Android Studio 2.0</a> was released with a super fast Android emulator, which is finally good news for me! However, the new emulator <a href="https://twitter.com/cheeaun/status/719135623685144576">uses too much CPU resources</a>, so I end up running the app <a href="https://twitter.com/cheeaun/status/719876657838841862">on my Nexus 5X phone instead</a>.</p><figure><img src="/blog/images/photos/objects/hackerweb-iphone-simulator-android-phone-macbook.jpg" alt="Running HackerWeb app on both iPhone/iOS simulator and Android Nexus 5X phone, with a MacBook" width="640" height="480"></figure><h2>One stupid bug</h2><p>For quite a long time, I was stuck with one very stupid bug that is trapped inside an unhandled <code>Promise</code> rejection or something like that. I couldn&apos;t trace where the error comes from, and my first suspicion is that it&apos;s a bug in React Native itself.</p><p>When the app is loaded in the emulator, the stories list loads once and permanently shows an error in subsequent reloads. When I enable <code>Debug in Chrome</code> from the developer menu, everything starts to work perfectly for some weird reason. When I disable <code>Debug in Chrome</code>, the bug comes back again!</p><p>So on one fine day, <strong>April 9</strong>, to be exact, I took few hours, painstakingly tracing the errors and <strong>finally</strong> found it.</p><p>This:</p><pre><code>this.state = {
  visited: links.includes(data.url),
};
</code></pre><p>It turns out that <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes"><code>Array.prototype.includes</code></a> doesn&apos;t work! Wait, it works fine on the iOS app but not Android?</p><p>I immediately read through the <a href="http://facebook.github.io/react-native/docs/javascript-environment.html">documentation</a> and it mentioned:</p><blockquote>
<p>When using React Native, you&apos;re going to be running your JavaScript code in two environments:</p>
<ul>
<li>On iOS simulators and devices, Android emulators and devices React Native uses <a href="http://trac.webkit.org/wiki/JavaScriptCore">JavaScriptCore</a>&#xA0;which is the JavaScript engine that powers Safari. On iOS JSC doesn&apos;t use JIT due to the absence of writable executable memory in iOS apps.</li>
<li>When using Chrome debugging, it runs all the JavaScript code within Chrome itself and communicates with native code via WebSocket. So you are using&#xA0;<a href="https://code.google.com/p/v8/">V8</a>.</li>
</ul>
<p>While both environments are very similar, you may end up hitting some inconsistencies. We&apos;re likely going to experiment with other JS engines in the future, so it&apos;s best to avoid relying on specifics of any runtime.</p>
</blockquote><p>For some reason, the JavaScript engine in iOS supports <code>Array.prototype.includes</code> but <strong>not</strong> the one in Android. The app works when debugging in Chrome because Chrome&apos;s JavaScript engine supports this method.</p><p>Immediately I fixed the bug, for <a href="https://github.com/cheeaun/hackerweb-native/commit/a1cbd0c39dc5ab3b7c25d8dd245dc6ac36b6aaf3">three</a> <a href="https://github.com/cheeaun/hackerweb-native/commit/94b3ee310641af8dbdfe4df5346c7014585bb7fb">fricking</a> <a href="https://github.com/cheeaun/hackerweb-native/commit/1fb3d25d84c4f0eb0df1b65e330c240bcbf44577">times</a>.</p><p>Ever since then, my life has changed for the better.</p><h2>UI and colors</h2><p>When I build HackerWeb in <a href="http://cheeaun.com/blog/2012/03/how-i-built-hacker-news-mobile-web-app/">2012</a>, I focus <strong>primarily</strong> on the iOS interface design, which later I came up with a more generic &apos;Web&apos; theme. The Web theme applies to all browsers <em>except</em> Mobile Safari, where the iOS theme kicks in. HackerWeb for iOS simply uses the web app&apos;s iOS theme.</p><figure><img src="/blog/images/screenshots/software/hackerweb-stories-view-web-ios-android@2x.png" alt="HackerWeb Stories view on Web, iOS and Android" width="575" height="330" loading="lazy"></figure><p>So far I&apos;ve never made an Android theme for the web app, so I&apos;ll have to make one for the Android app. At this point, it&apos;s pretty obvious that <a href="https://www.google.com/design/spec/material-design/introduction.html">Google&apos;s Material Design</a> is the right path to take.</p><figure><img src="/blog/images/screenshots/software/hackerweb-comments-view-web-ios-android@2x.png" alt="HackerWeb Comments view on Web, iOS and Android" width="575" height="330" loading="lazy"></figure><p>Material design&apos;s <a href="https://www.google.com/design/spec/style/color.html">color palette</a>, <a href="https://www.google.com/design/spec/layout/units-measurements.html">measurements</a>, and <a href="https://design.google.com/icons/">icons</a> are very helpful for me.</p><p>One of the very first thing that I have to decide on &quot;materialising&quot; the app interface is the (accent) color of the top navigation bar or so-called &quot;App bar&quot; combined with the status bar. Most Android apps have vibrantly-colored app bars, which I personally find very distracting.</p><p>The specifications <a href="https://www.google.com/design/spec/style/color.html">says</a>:</p><blockquote>
<p>Material takes cues from contemporary architecture, road signs, pavement marking tape, and athletic courts. Color should be unexpected and vibrant.</p>
</blockquote><p>For HackerWeb, the <em>accent</em> color would probably be either orange or blue. However, I strayed away and decided to use the <a href="https://www.google.com/design/spec/style/color.html#color-themes">Light theme</a> with a light-colored App bar which is less distracting and a better fit for the nature of the app.</p><figure><img src="/blog/images/figures/interface/hackerweb-material-design-light-theme.png" alt="HackerWeb app with Material Design&apos;s Light theme" width="480" height="420"></figure><p>By default, Android always render the system status icons as white, which wouldn&apos;t work well at all with a light gray (<code>#E0E0E0</code>) background. To change the color to semitransparent black, I have to <a href="https://plus.google.com/+RomanNurik/posts/4WBSonAZxt1">configure an additional <code>windowLightStatusBar</code> setting</a> which only works for Android Marshmallow (6.0) and above. For any versions before Marshmallow, I make it fallback to whatever the default color is.</p><h2>Navigational transitions</h2><p>The second thing that I need to change is the transition animation between views, for example, clicking the comment button in Stories view goes to the Comments view. By default, the <a href="http://facebook.github.io/react-native/docs/navigator.html#configurescene">scene animation</a> used in <code>Navigator</code> is <code>Navigator.SceneConfigs.PushFromRight</code>, which <em>pushes</em> the old view away and <em>slides</em> in the new view from the right side. This animation is <em>not quite</em> native on Android unfortunately.</p><p>According to Material Design patterns on <a href="https://www.google.com/design/spec/patterns/navigational-transitions.html">Navigational transitions</a>, this is referred as a &apos;Parent to child&apos; transition with the focus on &apos;Elevation and expansion&apos;:</p><blockquote>
<p>The surface that the user touches should lift up and expand into place from its origin. This expansion and motion highlights movement away from the parent towards a destination (a child element) in a natural movement using the material motion curve.</p>
</blockquote><figure><img src="/blog/images/figures/interface/navigator-transition-animations-pushfromright-floatfrombottomandroid.gif" alt="Navigator transition animations; PushFromRight and FloatFromBottomAndroid" width="280" height="200"></figure><p>Honestly I&apos;m not sure how to implement such <em>advanced</em> transition on React Native yet. So I opted for a <strong>simpler</strong> option, for now, <code>FloatFromBottomAndroid</code>, which is kind of like the <em>standard</em> animation in a few Android apps I&apos;ve tried. It <em>floats</em> on top of the view and fades in to the top.</p><h2>More Materials</h2><p>I spent most of my time adjusting the spacings to match the baseline grid and using the right colors. There were a few tiny adjustments and concerns that differ from the iOS app.</p><ul>
<li><a href="https://www.google.com/design/spec/style/typography.html">Material design spec</a> didn&apos;t mention anything about fixed-width typography, so I use the &quot;monospace&quot; value in the stylesheet, which looks like &apos;Courier&apos; font if I&apos;m not mistaken. On the iOS app, &apos;Menlo&apos; font is used.</li>
<li><a href="https://www.google.com/design/spec/layout/metrics-keylines.html">Material design spec</a> did mention vertical spacings for fixed-height list items. The story rows on HackerWeb&apos;s Stories view <strong>don&apos;t</strong> have fixed heights because I don&apos;t truncate the story title when it&apos;s too long. The spec says <code>72dp</code> for the height of a list item and <code>16dp</code> for the horizontal margins. In CSS terms, I set <code>padding-left</code> and <code>padding-right</code> to <code>16px</code> but I have no idea how much to set for <code>padding-top</code> and <code>padding-bottom</code>.</li>
<li>The spec on <a href="https://www.google.com/design/spec/style/icons.html#icons-product-icons">Product icons</a> mentions a lot on the visual proportions, shadows, lightings, tints and shades. HackerWeb&apos;s app icon follows these &quot;rules&quot; and now looks <em>smaller</em> than the other Android apps because they don&apos;t follow the &quot;rules&quot;. I was thinking of adding a shaded edge but most of the other app icons use drop shadows. In the end, I gave up and apply none of them &#x1F605;</li>
<li>On the Web and iOS version of HackerWeb, the &apos;About&apos; button is on the left side of the navigation bar. On the Android app, I moved it into the action overflow menu (button with 3 dots).</li>
</ul><h2>React Native awesomeness</h2><ul>
<li>On April 3, I released <a href="https://github.com/cheeaun/react-native-cache-store"><code>react-native-cache-store</code></a> as an <a href="https://www.npmjs.com/package/react-native-cache-store">NPM package</a>. It&apos;s a <code>localStorage</code>-like wrapper around React Native&apos;s <code>AsyncStorage</code> with cache expiration, fully inspired by Pamela Fox&apos;s <a href="https://github.com/pamelafox/lscache">lscache</a>. It&apos;s not very well-tested for now, as it&apos;s my first time trying out <a href="https://facebook.github.io/jest/">Jest</a> for unit testing.</li>
<li>I use <a href="https://github.com/haydenth/react-native-android-share"><code>react-native-android-share</code></a> for sharing, because there&apos;s no <a href="http://facebook.github.io/react-native/docs/actionsheetios.html#content"><code>ActionSheetIOS</code></a> for Android, yet.</li>
<li>I also use <a href="https://github.com/dstaley/react-native-chrome-custom-tabs"><code>react-native-chrome-custom-tabs</code></a>, a wrapper around <a href="https://developer.chrome.com/multidevice/android/customtabs">Chrome Custom Tabs</a> which surprisringly works like iOS&apos;s Safari View Controller. It&apos;s probably better than Safari View Controller because I can set it to prefetch the story URL by calling <code>mayLaunchUrl</code> if the user opens the Comments view.</li>
<li>Besides using the <code>Navigator</code> component for navigation, I also have to use the <a href="http://facebook.github.io/react-native/docs/backandroid.html#content"><code>BackAndroid</code></a> component to detect the &quot;hardware&quot; back button and allow users to navigate back to the previous view.</li>
<li><code>TouchableOpacity</code> and <code>TouchableHighlight</code> components are not native anymore on Android, so I have to change most of them to <a href="http://facebook.github.io/react-native/docs/touchablenativefeedback.html"><code>TouchableNativeFeedback,</code></a> which shows the pretty neat <a href="https://www.google.com/design/spec/animation/responsive-interaction.html#responsive-interaction-surface-reaction">Touch Ripple</a> effect.</li>
</ul><p>It&apos;s been a pretty good experience as I spend most of my time on the presentation layer rather than the logic parts of the app. Comments collapsing works. Long-pressing works. Data management with <a href="http://alt.js.org/">Alt</a> works. As I&apos;m convinced that the &apos;Live Reload&apos; feature in React Native is so fast and awesome, <a href="https://twitter.com/cheeaun/status/719142803293351936">development got <strong>even faster</strong></a> with <a href="https://facebook.github.io/react-native/blog/2016/03/24/introducing-hot-reloading.html">Hot Reloading</a> landed in version 0.22.0.</p><p>Before I knew it, the app is production-ready and waiting to be published to Google Play!</p><figure><img src="/blog/images/photos/objects/hackerweb-nexus-5x-macbook-keyboard.jpg" alt="HackerWeb on Nexus 5X on MacBook keyboard" width="800" height="391"></figure><h2>Launching on Google Play</h2><p>Before publishing, I followed <em>all</em> the instructions on <a href="http://facebook.github.io/react-native/docs/signed-apk-android.html">generating a signed APK</a>. Very helpful and a bit confusing sometimes. Unlike using Xcode, I don&apos;t need to always set the &apos;scheme&apos; from <code>Debug</code> to <code>Release</code> because the command <code>./gradlew assembleRelease</code> will automatically create an APK file with debugging turned off. Running the release build on my Nexus phone is pretty easy, though sometimes when I get installation errors, I&apos;ll need to uninstall the app first before installing.</p><p>To record my iPhone 6S screen, I can use QuickTime on my MacBook. But for my Nexus 5X, I use a super simple screenshot/recording tool called <a href="https://github.com/mortenjust/androidtool-mac">Android tool</a> (yeap, very generic name). After recording, I&apos;ll use <a href="https://cloudconvert.com/">CloudConvert</a> to convert it to an animated GIF, with reduced resolution and lowered to usually 15 FPS. When I&apos;m tweeting the video, I use <a href="https://itunes.apple.com/us/app/slow-fast-slow-control-speed/id727309825?mt=8">Slow Fast Slow</a> to speed up and shorten the video length to satisfy Twitter&apos;s video upload criterias.</p><p>On April 19, I fiddled around the Google Play Developer Console and <a href="https://twitter.com/cheeaun/status/722445719139823616">set up Alpha testing</a> for HackerWeb. I don&apos;t know why I choose Alpha testing instead of Beta testing. To be honest, I have no clue why there are two &apos;stages&apos; of testing at all. One thing I find really cool is that as I set the minimum SDK version to 23 (6.0), the Console can tell me that there are 428 supported Android devices. Later I realised some users are still using older versions, so I reduced the minimum SDK version to 21 (5.x) and the Console shows me 2554 supported devices. Neat.</p><p>A day later, I officially announce the release of my first Android app on <a href="https://twitter.com/cheeaun/status/722800946053394433">Twitter</a> and <a href="https://www.facebook.com/cheeaun/posts/10153949800466294">Facebook</a> &#x1F680;</p><figure><img src="/blog/images/screenshots/web/hackerweb-google-play.png" alt="HackerWeb on Google Play" width="680" height="720"></figure><p>Now that HackerWeb is available on both iOS and Android, it&apos;s quite clear for me to <a href="https://twitter.com/cheeaun/status/722812442586165248">rename the repository &apos;hackerweb-ios&apos; to &apos;hackerweb-native&apos;</a>, basically <em>borrowing</em> the word &apos;native&apos; from, well, React <strong>Native</strong>. I don&apos;t have to worry about broken links because <a href="https://help.github.com/articles/renaming-a-repository/">GitHub will automatically redirect to the new name</a>.</p><p>This has been a surprisingly interesting and unbelievable experience for me because everything seems to happen so fast. I believe &apos;<a href="https://twitter.com/cheeaun/status/702328068774318080">Cross-stack engineering</a>&apos; will be the next big thing and React Native provides an opportunity for everyone.</p><p>Thanks again to all my users, testers and friends. <a href="https://github.com/cheeaun/hackerweb-native">Stay tuned</a>. <a href="https://twitter.com/cheeaun">Follow me on Twitter</a>&#xA0;or&#xA0;<a href="https://twitter.com/hackerwebapp">@hackerwebapp</a>&#xA0;for updates.</p></div>
      </article>
  </div>
  <footer>
    <nav>
      <ul>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/projects/">Projects</a></li>
        <li><a href="/about/">About</a></li>
      </ul>
    </nav>
  </footer></div>
<script>
  window.onload = function () {
    // Auto float images
    var $figures = document.getElementsByTagName('figure');
    if (!$figures.length) return;
    function asideImages () {
      for (var i = 0, l = $figures.length; i < l; i++) {
        var $figure = $figures[i];
        var $images = $figure.getElementsByTagName('img');
        if ($images.length == 1) {
          var $img = $images[0];
          var width = Math.max($img.naturalWidth, $img.width);
          var height = Math.max($img.naturalHeight, $img.height);
          if (width <= 280 && (width / $figure.parentNode.offsetWidth * 100 < 50) && height < window.innerHeight * 0.9) {
            $figure.className = 'image-aside';
          } else if ($figure.className) {
            $figure.className = '';
          }
        }
      }
    };
    asideImages();
    window.onresize = asideImages;

    // Autoplay videos when in viewport
    // https://benfrain.com/automatically-play-and-pause-video-as-it-enters-and-leaves-the-viewport-screen/
    function playPauseVideo() {
      var videos = document.querySelectorAll("video");
      videos.forEach((video) => {
        video.muted = true;
        var playPromise = video.play();
        if (playPromise !== undefined) {
          playPromise.then((_) => {
            var observer = new IntersectionObserver(
              (entries) => {
                entries.forEach((entry) => {
                  if (entry.isIntersecting) {
                    video.play();
                  } else {
                    video.pause();
                  }
                });
              },
              { threshold: 0.2 }
            );
            observer.observe(video);
          });
        }
      });
    }
    playPauseVideo();
  };
  if (navigator.serviceWorker) {
    window.addEventListener('load', function () {
      navigator.serviceWorker.register('/sw.js', {
        scope: '/'
      });
    });
  }
</script>
<script data-goatcounter="https://cheeaun.goatcounter.com/count" async src="//gc.zgo.at/count.v2.js" crossorigin="anonymous" integrity="sha384-PeYXrhTyEaBBz91ANMgpSbfN1kjioQNPHNDbMvevUVLJoWrVEjDCpKb71TehNAlj"></script>
<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "56009c05c6234036a216843af8874520"}'></script><!-- End Cloudflare Web Analytics -->
</html>