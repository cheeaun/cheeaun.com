<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<title>Designing bus service route diagrams on BusRouter SG &ndash; Lim Chee Aun</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="preload" href="/assets/fonts/WorkSans-Regular.woff2" as="font" type="font/woff2">
<style>html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body,button,html,input,select,textarea{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol"}code,kbd,pre,samp,var{font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace}a{text-decoration:none}a:hover{text-decoration:underline}a img,img{border:0}h1,h2,h3,h4,h5,h6{margin:0;padding:0}p{padding:0}caption{font-weight:700;padding:.5em}table{border-collapse:collapse;border-spacing:0}td,th{vertical-align:top}ol,ul{padding:0}dt{font-weight:700}dfn{font-style:normal;font-weight:700}abbr{border-bottom:1px dotted}form{margin:0;padding:0}legend{font-weight:700}button,input,select,textarea{font-size:1em;max-width:100%;vertical-align:middle;margin:0}textarea{overflow:auto}button,input.button{padding:0 .5em;overflow:visible}article,aside,details,figcaption,figure,footer,header,hgroup,nav,section,summary{display:block}@font-face{font-family:'Work Sans';font-style:normal;font-weight:400;font-display:swap;src:url(/assets/fonts/WorkSans-Regular.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:italic;font-weight:400;font-display:swap;src:url(/assets/fonts/WorkSans-Italic.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:normal;font-weight:500;font-display:swap;src:url(/assets/fonts/WorkSans-Medium.woff2) format('woff2')}@font-face{font-family:'Work Sans';font-style:italic;font-weight:500;font-display:swap;src:url(/assets/fonts/WorkSans-MediumItalic.woff2) format('woff2')}body,html{overflow-x:hidden}body{color:#444;background-color:#fff;padding:0;margin:0;font-family:'Work Sans',-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-size:16px}a{color:#0b62a0;padding:.25em;margin:-.25em;border-radius:3px;text-decoration:underline;text-underline-offset:1px;text-decoration-color:#0b62a061}a:hover{color:#000;text-decoration:underline}a:focus{color:#000;background-color:rgba(0,0,0,.08);text-decoration:none}b,dt,strong,th{font-weight:500}li,p{line-height:1.5em}ol,ul{margin-left:1.35em}img,video{max-width:100%;height:auto}p strong{color:#000}p a strong{color:inherit}code,kbd,samp,var{background-color:#fafafa;font-size:.9em}:not(pre)>code,:not(pre)>kbd,:not(pre)>samp,:not(pre)>var{color:#08632c;background-color:transparent}:not(pre)>code:before,:not(pre)>kbd:before,:not(pre)>samp:before,:not(pre)>var:before{content:'`';opacity:.5}:not(pre)>code:after,:not(pre)>kbd:after,:not(pre)>samp:after,:not(pre)>var:after{content:'`';opacity:.5}pre code{background-color:auto}#container{position:relative;margin:auto;max-width:40em;word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}#container pre{word-wrap:normal;overflow-wrap:normal;word-break:normal}header{text-align:center;padding:50px}header h1{margin:0}header h1 a{display:inline-block;border-radius:50%}header h1 a:focus{transform:scale(.97)}header svg{vertical-align:top}header h1 a:focus svg{-webkit-filter:brightness(.9);filter:brightness(.9)}#content{padding:0 1em}#content h1{font-size:44px;line-height:1.2em;margin:0 0 .5em;text-align:center;letter-spacing:-.05em;font-weight:500}#content header{text-align:left;padding:0;background-image:none}#content article h1+time{display:block;text-align:center;padding:0 0 4em;color:#767676}#content h2{font-size:32px;letter-spacing:-.05em;font-weight:500;color:#333;margin:0 0 .75em;line-height:1.2em}#content *+h2{margin-top:1.5em}#content article.summary h2{margin-bottom:.5em}#content article.summary time{color:#767676;display:block;margin:0 0 .75em}#content p{margin:0 0 1em}#content ol,#content ul{margin-bottom:1em}#content dt{margin-bottom:1em;color:#000}#content dd{margin-left:1.35em}#content pre{margin:0 0 1em;border-radius:3px;padding:1em;background-color:#f3f3f3;font-size:.9em;line-height:1.5em;overflow:auto}#content pre code,#content pre kbd,#content pre samp,#content pre var{background-color:inherit}#content pre em,#content pre strong{color:red;font-style:normal}#content pre em.remark{color:#767676;font-style:normal}#content pre var{color:#060;font-style:normal}#content blockquote{border-left:3px solid #999;padding:.6em 0 .6em 1em;margin:0 0 2em}#content blockquote p:last-child{margin-bottom:0}#content table{margin:0 auto 1em;border:1px solid #ddd}#content table td,#content table th{padding:.5em .9em}#content table thead th{text-align:center;background-color:#eee}#content table tbody th{text-align:left}#content table tbody tr:nth-child(even){background-color:#fafafa}#content aside{padding:5px 10px}#content aside,#content aside p{line-height:28px;background-color:#fff5d9;text-align:right}.pinyin{font-style:italic}.remark{font-style:italic;color:#767676}:lang(ms){font-style:italic}#content figure{text-align:center;margin:1em -1em}#content *+figure{margin-top:2em;margin-bottom:2em}#content time+figure{margin-top:0}#content figure.image-aside{margin:0 0 1em 1em;padding:10px;background-color:rgba(255,255,255,.5);float:right;clear:right}#content figure img.large{max-width:100vw;position:relative;left:50%;transform:translateX(-50%)}#content blockquote figure img.large{left:calc(50% - 10px)}#content figure a{padding:0;margin:0;border:0}#content figure a img{vertical-align:bottom}#content figure a:focus img{-webkit-filter:brightness(.9);filter:brightness(.9)}#content video{display:block;margin:auto}#content hr{border:0;border-top:1px solid #ccc;margin:2em}footer{padding:50px;text-align:center;color:#767676}footer a{color:inherit}footer nav ul{list-style:none;display:block;margin:0 0 20px}footer nav ul li{display:inline}footer nav ul li a{margin:0 .25em}#blog-archives ul{list-style:none;margin:0 -1em}#blog-archives ul li{padding:.5em 1em}#blog-archives ul li:nth-child(even){background-color:#fafafa}#blog-archives time{float:right;margin-left:1em}@-ms-viewport{width:device-width;zoom:1.0}@viewport{width:device-width;zoom:1.0}@media print{footer{display:none}#content a[href]{text-decoration:none}#content a[href]:after{content:" (" attr(href) ") ";font-size:90%}blockquote,figure,img,li,p,pre,video{break-inside:avoid;page-break-inside:avoid}h2,h3{break-after:avoid-page;page-break-after:avoid}p{orphans:2;widows:2}}</style>
<meta name="twitter:card" content="summary">
<meta property="og:title" content="Designing bus service route diagrams on BusRouter SG">
<meta name="description" property="og:description" content="I launched the all-new design for BusRouter SG on November 2018. I wrote about my journey that lead me to the current design and quoted: Redesignâ€¦">
<meta property="og:image" content="https://cheeaun.com/blog/images/screenshots/web/busrouter-sg-old-map-view-list-view@2x.png">
<link rel="alternate" href="/blog/feed.xml" type="application/atom+xml" title="cheeaunblog">
<link rel="manifest" href="/manifest.webmanifest">
<link rel="apple-touch-icon" href="/assets/images/icon-192.png">
<meta name="theme-color" content="#fff"><div id="container">
  <header role="banner">
    <h1>
      <a href="/"><svg width="120" height="120" viewBox="0 0 225 225">
    <title>Lim Chee Aun</title>
    <circle cx="112.5" cy="112.5" r="112.5" fill="#fa8e01"/>
    <path fill="#fff" d="M104.8 127.1c-.8.4-1.9.9-3 1.3-1.2.5-2.4.9-3.6 1.2-1.2.3-2.3.5-3.3.5-3 0-5.3-1.5-7-4.7-1.6-3.1-2.5-7.8-2.5-13.9 0-4.3.4-7.6 1.2-9.9.7-2.3 1.8-4 3.2-4.9 1.3-1 2.9-1.4 4.7-1.3 1.2-.1 2.7.1 4.4.5 1.8.4 3.7 1.1 5.7 2.2l3.3-15.5c-2.7-.9-5.3-1.5-8-1.9-2.5-.3-4.8-.5-6.8-.5-5.8 0-10.7 1.1-14.8 3.3-4.1 2.2-7.2 5.7-9.4 10.7-2.1 4.8-3.2 11.2-3.3 19.2 0 10.8 2.1 18.8 6.3 24 4.1 5.2 10.2 7.8 18.3 7.8 2.2 0 4.4-.1 6.6-.5 2.2-.3 4.3-.8 6.3-1.4 2-.6 3.7-1.3 5.2-2.1l-3.5-14.1zm54.5 16.9c-.2-1.8-.5-3.8-.8-6.1-.2-2.2-.4-4.5-.6-7-.2-2.4-.3-4.9-.3-7.3v-23c0-2.9-.3-5.6-1-8.1-.6-2.5-1.8-4.7-3.3-6.6-1.6-1.9-3.9-3.4-6.7-4.5-2.8-1-6.3-1.6-10.6-1.6-3.5 0-7.1.4-10.7 1.1-3.6.8-7.3 1.8-11 3.1l3.7 14c3.1-1.2 5.8-2.1 8.2-2.8 2.5-.6 4.5-.9 6.1-.9 1.8 0 3.3.5 4.4 1.4 1.2 1 1.8 2.6 1.8 4.9v7.7c-3.8.3-7.2.8-10.4 1.6s-6 1.9-8.4 3.3c-2.4 1.5-4.3 3.4-5.7 5.8-1.3 2.3-2 5.1-2 8.5 0 2.3.2 4.5.7 6.7.5 2.1 1.3 4 2.4 5.6 1.1 1.7 2.5 3 4.1 3.9 1.7 1 3.6 1.5 5.9 1.5 2.6 0 4.9-.4 6.9-1.2 2.1-.8 3.9-1.8 5.6-2.9 1.6-1.1 3.1-2.2 4.6-3.3l1.5 6.2h15.6zm-20.7-14.9c-.9.8-1.8 1.4-2.6 1.9s-1.6.7-2.5.7c-1.4 0-2.5-.6-3.4-1.8-.8-1.2-1.3-2.8-1.3-5 0-1.7.5-2.9 1.4-3.8 1-.8 2.2-1.4 3.7-1.7 1.5-.3 3-.6 4.7-.7v10.4z"/>
    <circle cx="112.5" cy="112.5" r="83.7" fill="none" stroke="#fff" stroke-width="20.1"/>
  </svg>
  </a>
    </h1>
  </header>
  <div id="content">
    <article itemscope itemtype="http://schema.org/BlogPosting">
      <header><h1 itemprop="heading">Designing bus service route diagrams on BusRouter SG</h1><time datetime="2021-09-20" class="meta date" itemprop="datePublished">20 September 2021</time></header><div itemprop="articleBody"><p>I launched the all-new design for <a href="https://busrouter.sg/">BusRouter SG</a> on <a href="https://twitter.com/cheeaun/status/1064344313549574144">November 2018</a>. I <a href="/blog/2019/02/building-busrouter-sg/">wrote about my journey</a> that lead me to the current design and quoted:</p><blockquote>
<p><strong>Redesign the whole UI</strong> to be more map-focused and mobile-optimized.</p>
<ul>
<li>Getting rid of the list view, especially the list of stops for a bus service. Despite its usefulness, I realised that most users don&#x2019;t care about the bus stop numbers and names.</li>
<li>Putting more focus on the search field as I expect most users have a bus service in mind and won&#x2019;t be <em>browsing</em> for bus services.</li>
<li>The map should take the full spotlight, by hiding any unnecessary information, and let users focus on the map data.</li>
</ul>
</blockquote><p>The first point, for getting rid of the list of stops, was actually a huge deal.</p><p>Most web sites and apps usually show two views; map view and list view. The former is great for visually identifying the <em>real</em> geographical locations, while the latter is more readable and scannable.</p><p>The <strong>previous design</strong>, showing map view <em>and</em> list view:</p><figure><img src="/blog/images/screenshots/web/busrouter-sg-old-map-view-list-view@2x.png" alt="Previous design of BusRouter SG, with map view and list view" width="800" height="600" loading="lazy" class="large"></figure><p>The <strong>current design</strong> (2018-2020), with <em>only</em> the map view:</p><figure><img src="/blog/images/screenshots/web/busrouter-sg-map-view@2x.png" alt="Current design of BusRouter SG (2018-2020) with only the map view" width="800" height="600" loading="lazy" class="large"></figure><p>At that time, my thinking is that the list view is useless, as I suspect most people don&#x2019;t remember stop numbers and even the stop names. The map view is more <em>visual</em> and geographically contextual.</p><p>Removing the list view was a huge bet. But after a while I have a hunch that some people may not be as map literate as I am. I suspect that <em>most</em> users of BusRouter SG would be pretty <em>advanced</em> bunch of people who are either passionate about public transports or really knows their way around very well.</p><p>Or... perhaps they&apos;re neither? &#x1F914;</p><p>There were two reasons why I remove the list view:</p><ol>
<li>There&#x2019;s <strong>not enough space</strong> to fit both map view and list view on a small-screen device. I&#x2019;ve struggled with this by making both views use half of the screen real estate. I&#x2019;ve thought of making it toggle between views, showing one view at a time, though it would make it difficult to <em>link</em> both views visually.</li>
<li>Some bus services <strong>have two route patterns</strong>, usually to and fro. The old design, including all other sites and apps, render them in tabs which the user has to toggle. So the user can only view <em>one</em> route pattern at a time on the list view, but they can see <em>both</em> patterns on the map view. Though some sites and apps opt to show one of the patterns on the map too.
<figure><img src="/blog/images/screenshots/web/busrouter-sg-old-one-service-two-routes-tabs.gif" alt="The old BusRouter SG, showing one service and two routes tab" width="480" height="411" loading="lazy"></figure></li>
</ol><p>Over the years, I&#x2019;ve rethought about these reasons.</p><ol>
<li>Phones are getting bigger, so there should be more space now for both map view and list view. I know that smaller-screen devices still exist but I did a cost-benefit analysis and think scrolling down a list is <em>still</em> easier than zooming in/out and panning on a map.</li>
<li>Showing one route pattern at a time is not ideal. Showing both takes up a lot space. I need to think of a much better solution for this.</li>
</ol><h2>The beginning</h2><p>On <a href="https://twitter.com/cheeaun/status/1397539071895883782">May 2021</a>, I took <strong>a small step forward</strong> into designing and coding one of the <strong>coolest bus service route diagrams I&#x2019;ve ever seen</strong>.</p><p><em>First</em> iteration looks like this:</p><figure><img src="/blog/images/screenshots/web/bus-service-route-diagram-iteration-1@2x.jpg" alt="Bus service route diagram, first iteration" width="320" height="568" loading="lazy"></figure><ul>
<li>Both route patterns are side-by-side taking half of the vertical space (two columns).</li>
<li>Stops are rendered as red circles, with red lines in between.</li>
<li>Stop numbers and names are rendered too. Names are not truncated so they could wrap up to 2 or 3 lines.</li>
<li>This was initially done with <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a> and every stop row will grow to accommodate space until the last stop at the bottom.</li>
</ul><p>For this route, the data looks roughly like this:</p><ol>
<li>Ang Mo Kio Int &#x2192; &#x2026; &#x2192; Shenton Way Ter</li>
<li>Shenton Way Ter &#x2192; &#x2026; &#x2192; Ang Mo Kio Int</li>
</ol><p>For this iteration, the second (right) column is <strong>purposely reversed</strong> so that the first stop of the first route pattern is positioned together with the last stop of the second route pattern.</p><p>But here&#x2019;s the problem, how would the users know that?</p><p><em>Second</em> iteration <a href="https://twitter.com/cheeaun/status/1397546051674906624">fixes the problem</a>:</p><figure><img src="/blog/images/screenshots/web/bus-service-route-diagram-iteration-2@2x.jpg" alt="Bus service route diagram, second iteration" width="320" height="568" loading="lazy"></figure><ul>
<li>Arrows are added to indicate the direction of the route patterns.</li>
<li>They are not placed after every single stop, but decently spaced out to prevent clutter.</li>
<li>Interestingly, there was a <a href="https://twitter.com/jg_lim/status/1397546621735342080">feedback</a> that they look like approximate real-time locations of buses on the routes &#x1F914;.</li>
</ul><p>Looking at this, it feels like my job is done.</p><p>But I got curious. For a long time, I have this idea of linking the stops from the opposite route patterns.</p><p>For example:</p><figure><img src="/blog/images/screenshots/web/bus-stops-opposite@2x.jpg" alt="Bus stops opposite each other, possibly walkable via pedestrian crossing" width="500" height="300" loading="lazy"></figure><p>Bus stop &#x201C;Blk 140&#x201D; (10061) is geographically opposite of &#x201C;Opp Blk 140&#x201D; (10069). They are walkable via the pedestrian crossing. There&#x2019;s also a possibility that they serve the same bus services, which is useful if someone accidentally took the wrong side or overshoot their journey, they know the opposite stop should serve the same services of the opposite direction &#x1F609;.</p><p>To know the &quot;opposite states&quot; of the stops would be a difficult task as they are many kinds of roads and I wouldn&#x2019;t know if they really serve the same services or even walkable in between. I probably could go though all stops, determine their distances, figure out the services that go through each stop, and generate a whole set of data? Sounds like a lot of work &#x1F605;.</p><p>Fortunately, thanks to <a href="https://landtransportguru.net/">Land Transport Guru</a>, a website made by a few awesome transport enthusiasts, I found <a href="https://landtransportguru.net/bus-stops/">this gem</a>:</p><blockquote>
<p>Most bus stops end with the digit &#x2018;1&#x2019; or &#x2018;9&#x2019;. The last digit is used to differentiate the direction of the services. If it ends with &#x2018;1&#x2019; for a service travelling from A to B, the pairing of this bus stop across the road for direction B to A will have a bus stop number ending with &#x2018;9&#x2019;.</p>
</blockquote><p>This <em>really</em> makes thing easier.</p><p>I <a href="https://twitter.com/cheeaun/status/1397901070697783296">made a quick hack</a> on the rows and columns and came up with these:</p><figure><img src="/blog/images/screenshots/web/bus-service-route-diagram-iteration-3@2x.jpg" alt="Bus service route diagram, third iteration #1" width="320" height="568" loading="lazy"></figure><figure><img src="/blog/images/screenshots/web/bus-service-route-diagram-iteration-4@2x.jpg" alt="Bus service route diagram, third iteration #2" width="320" height="568" loading="lazy"></figure><figure><img src="/blog/images/screenshots/web/bus-service-route-diagram-iteration-5@2x.jpg" alt="Bus service route diagram, third iteration #3" width="320" height="568" loading="lazy"></figure><figure><img src="/blog/images/screenshots/web/bus-service-route-diagram-iteration-6@2x.jpg" alt="Bus service route diagram, third iteration #4" width="320" height="568" loading="lazy"></figure><ul>
<li>Blue dots in between opposite stops. <em>Feels</em> like walking routes.</li>
<li>The opposite stops affect the <em>whole</em> layout and stretch the lines vertically, as if there are magnets between the opposite stops.</li>
<li>The arrows become slightly opaque, serving as a more subtle hint for the directions.</li>
<li>The stops that are at the top and bottom of the list (first stop of first route with last stop of second route, and last stop of first route with first stop of second route) will be combined into a single stop if they are the same stop. This makes the line looks continuous and closed-loop if the route pattern is A &#x2192; B and B &#x2192; A.</li>
</ul><p>For this kind of layout, I have to use <code>&lt;table&gt;</code>s instead of Flexbox. The height of every stop cell changes based on the length of the stop name and the linked opposite stops affecting the sibling stops. To <em>stretch</em> some of the cells, I have to tweak and calculate the <code>rowspan</code> to &#x201C;push&#x201D; the cells down.</p><p>In other words, it&#x2019;s <strong>a lot of math</strong>. &#x1F635;&#x200D;&#x1F4AB;</p><p>I made a few more changes and experimented on how the interactions would look like:</p><figure><video src="/blog/videos/web/busrouter-sg-bus-service-route-diagram.mp4#t=0.1" controls playsinline=""></video></figure><ul>
<li>Bus stop numbers have changed from white text on red background to just red text. They don&#x2019;t need to be so eye-catchy and now it looks more consistent with the map marker labels.</li>
<li>Map view takes top half of the screen viewport while the list view takes the bottom half. Seems&#x2026; okay.</li>
<li>Tapping on a stop in the list will zoom to the stop on the map. Tapping it the second time will open the stop popover.</li>
<li>A legend is added at the bottom of the diagram to explain what the blue dots mean.</li>
</ul><h2>The testing</h2><p><a href="https://twitter.com/cheeaun/status/1398643394138677262">Basically</a>, there are 4 <em>main</em> types of route patterns.</p><figure><img src="/blog/images/figures/diagram/bus-service-route-diagrams-4-types.png" alt="Bus service route diagrams, 4 types of route patterns; A to B, A to B and B to A, A to A, and A to B and C to D" width="1740" height="3280" loading="lazy" class="large"></figure><p>Notice that for A &#x2192; B (one-way route), the diagram is simply a list, with red line on the left side instead of center.</p><p>At this point, I feel like my job is done (again?), <em>but</em> still not feeling confident enough to see if the diagram layout logic would work for <strong>every</strong> single use-case. There could be A &#x2192; B + B &#x2192; C route? What if the first stop of first route pattern is opposite of the 2nd last stop of the 2nd route pattern? What if the route pattern has only 2 stops and also a loop route?</p><p>Okay fine, I <a href="https://twitter.com/cheeaun/status/1398944388395409410">wrote tests</a>!</p><figure><img src="/blog/images/figures/diagram/bus-service-route-diagrams-tests.png" alt="Bus service route diagrams tests" width="2880" height="2868" loading="lazy" class="large"></figure><p>I try to <em>simulate</em> as many (weird) use-cases as possible and fix the bugs as I find them. This test suite is not quite a <em>real</em> test suite. There are no test frameworks and I&#x2019;m basically eyeballing for bugs or unexpected cases &#x1F923;.</p><p>I feel that this is <em>still</em> not enough, and decided to <a href="https://twitter.com/cheeaun/status/1399035542147264516">go the extra mile</a> and render <strong>all 500+ bus routes</strong>. &#x1F92F;</p><figure><video src="/blog/videos/web/busrouter-sg-500-bus-service-route-diagrams.mp4#t=0.1" controls playsinline=""></video></figure><p>By doing this, I manage to find <em>even more</em> bugs (duh).</p><p><a href="https://twitter.com/cheeaun/status/1399378847498342405">For</a> <a href="https://twitter.com/cheeaun/status/1399378847498342405">example</a>, bus service &#x2018;<strong>307</strong>&#x2019;:</p><figure><img src="/blog/images/screenshots/web/bus-service-307-route-wrap@2x.jpg" alt="Bus service 307; two versions of its route" width="512" height="1156" loading="lazy"></figure><p>The diagram above shows two versions; left is the initial implementation, right is the final best-effort &#x201C;bottom-wrapped&#x201D; fixed version.</p><p>This bus service is one of the cases where this kind of layout is not suitable. &#x201C;Chua Chu Kang Int&#x201D; (44009) has to be at the top of the list so that the user can see where the bus starts departing. But in reality, the route on the map looks like this:</p><figure><img src="/blog/images/screenshots/web/bus-service-307-map-busrouter-sg@2x.jpg" alt="Bus service 307&#x2019;s route on the map" width="455" height="628" loading="lazy"></figure><p>&#x201C;Chua Chu Kang Int&#x201D; is right in the <strong>middle</strong> of the route loop, with <em>most</em> of the other stops being opposite to one another.</p><p>The bus stops that require some attention here is &#x2018;44461&#x2019; opposite to &#x2018;44469&#x2019;. In the above route diagram for service &#x2018;307&#x2019;, there&#x2019;s no way that they can laid out opposite each other. All the bus stops at the top section can&#x2019;t be grouped together, but at least the stops at the bottom section can be &#x201C;wrapped&#x201D; around (best-effort fix).</p><p>I&#x2019;ve thought about this. Here are some sketches that could possibly fix this and make it contextually similar to their geographical locations.</p><figure><img src="/blog/images/figures/diagram/bus-service-307-route-fixes-contextual-geographical-locations.jpg" alt="Sketches of bus service 307&#x2019;s route fixes with better contextual and geographical locations" width="781" height="1024" loading="lazy"></figure><p>There are 3 sketches.</p><ul>
<li>The <strong>first sketch</strong> is the most logical layout but it takes up more horizontal space which doesn&#x2019;t match the vertical layout here. It will also be more difficult to place the stop numbers and names along the stop circles. &#x1F62B;</li>
<li>The <strong>second sketch</strong> shifts the starting stop to the left-side middle of the list. The layout stays the same in vertical mode but now the starting stop is no longer the first at-the-top thing that the user see, which may cause some confusion. &#x1F928;</li>
<li>The <strong>third sketch</strong> is a weird combination of both, trying to maintain the vertical layout mode while trying to keep the starting stop at the top. Obviously, it&#x2019;s impossible to fit so many things in such a tight space. Two columns of stop numbers and names is already quite a challenge, and this is like four columns? &#x1F605;</li>
</ul><p>I didn&#x2019;t implement any of these sketches. None of them are perfect yet.</p><p>So for now, service &#x2018;307&#x2019; ended up with the above-shown best-effort version, with &#x201C;bottom-wrapped&#x201D; stops.</p><p>Okay, let&#x2019;s move on to another <a href="https://twitter.com/cheeaun/status/1399739597425233920">example</a>, bus service &#x2018;<strong>410</strong>&#x2019;:</p><figure><img src="/blog/images/screenshots/web/bus-service-410-route@2x.jpg" alt="Bus service 410 route" width="260" height="1024" loading="lazy"></figure><p>Looking at this diagram carefully, there are <strong>two</strong> &#x201C;Bishan Int&#x201D; stops and&#x2026; they&#x2019;re actually the same place (53009)! This is rendered like a A &#x2192; B &#x2192; A route but it&#x2019;s actually A &#x2192; A &#x2192; A. &#x1F635;&#x200D;&#x1F4AB;</p><p>It has two route patterns. Both goes to the same stop so that makes it a loop route. This means service &#x2018;410&#x2019; has two one-way loop routes! &#x1F92F; (I&#x2019;m not sure if I&#x2019;m making any sense here)</p><p>It&#x2019;s <em>really</em> difficult to explain this. The route on the map looks like this:</p><figure><img src="/blog/images/screenshots/web/bus-service-410-map-busrouter-sg@2x.jpg" alt="Bus service 410&#x2019;s route on the map" width="751" height="500" loading="lazy" class="large"></figure><p>For the first route pattern, the bus goes anti-clockwise starting from &#x201C;Bishan Int&#x201D; and end up back to the same stop itself. Then for the second pattern, the bus goes clockwise.</p><p>Some might think that this should have been two separate bus services, right? &#x1F60F;</p><p>The geographically-correct route diagram should have been like this:</p><figure><img src="/blog/images/figures/diagram/bus-service-410-route-fixes-contextual-geographical-locations.jpg" alt="Sketch of bus service 410&#x2019;s route fixes with better contextual and geographical stop locations" width="800" height="1407" loading="lazy"></figure><p>Sigh, yet another impossible 4-column layout? I can&#x2019;t think of any other ways to represent these route patterns.</p><p>I decided to keep this in the backlog and maybe come up with a solution next time. So, service &#x2018;410&#x2019; is left untouched. &#x1F64F;</p><p>Anyway, I continued rendering all 500+ services and fixing all the weird routes. Things start to <a href="https://twitter.com/cheeaun/status/1399388155627786243">look pretty good</a>.</p><figure><img src="/blog/images/screenshots/web/500-bus-routes-singapore-1@2x.jpg" alt="500+ bus routes rendered #1" width="1432" height="688" loading="lazy" class="large"></figure><p>I&#x2019;ve updated the pagination.</p><figure><img src="/blog/images/screenshots/web/500-bus-routes-singapore-2@2x.jpg" alt="500+ bus routes rendered #2" width="1428" height="702" loading="lazy" class="large"></figure><p>Added bus service names too besides the bus number.</p><figure><img src="/blog/images/screenshots/web/500-bus-routes-singapore-3@2x.jpg" alt="500+ bus routes rendered #3" width="1431" height="707" loading="lazy" class="large"></figure><p>A few more <em>weird</em> bus routes like &#x2018;811&#x2019; and &#x2018;912&#x2019;.</p><p>And&#x2026; not forgetting bus service &#x2018;902&#x2019;, the shortest bus route ever in Singapore.</p><figure><img src="/blog/images/screenshots/web/bus-service-902-route@2x.png" alt="Bus service 902&#x2019;s route, with only two stops" width="382" height="262" loading="lazy"></figure><h2>The launch</h2><p>On <a href="https://twitter.com/cheeaun/status/1401895481467228161">7 June 2021</a>, I launched the all-new bus routes diagram on <a href="https://busrouter.sg/">BusRouter SG</a>, with a little bit of <a href="https://twitter.com/cheeaun/status/1401406847479812097">redesign</a>. &#x1F680;</p><figure><img src="/blog/images/screenshots/web/busrouter-sg-website-bus-service-route-diagram-133@2x.jpg" alt="BusRouter SG web site showing the bus service route diagram, for bus service 133" width="1024" height="768" loading="lazy" class="large"></figure><p>I also made a little introductory video and <a href="https://www.reddit.com/r/singapore/comments/nv03xe/ive_designed_a_pretty_unique_bus_service_route/">posted it on /r/singapore</a>.</p><figure><a href="https://www.reddit.com/r/singapore/comments/nv03xe/ive_designed_a_pretty_unique_bus_service_route/"><img src="/blog/images/screenshots/web/reddit-designed-unique-bus-service-route-diagram-busrouter-sg@2x.jpg" alt="Reddit post on /r/singapore, titled &#x201C;I&#x2019;ve designed a pretty unique bus route diagram on bus router.sg&#x201D;" width="480" height="640" loading="lazy"></a></figure><p>Feedback from the Reddit folks have been surprisingly positive, which I think is more related to the whole app itself instead of the route diagrams &#x1F605;. It&#x2019;s pretty obvious that there are still a lot of people who don&#x2019;t know the existence of my app, as I don&#x2019;t do any marketing work for it.</p><p>Nevertheless, positive feedback is always good and this experiment has been a lot of fun for me. I&#x2019;m still not sure if this work will be useful for anyone, however I do felt <strong>relieved</strong>, like a weight has been lifted off my shoulders. An idea that has been stuck in my mind for so long, is now actualised. Despite not 100% perfect yet, at least it&#x2019;s out for public consumption.</p></div>
      </article>
  </div>
  <footer>
    <nav>
      <ul>
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/projects/">Projects</a></li>
        <li><a href="/about/">About</a></li>
      </ul>
    </nav>
  </footer></div>
<script>
  window.onload = function () {
    // Auto float images
    var $figures = document.getElementsByTagName('figure');
    if (!$figures.length) return;
    function asideImages () {
      for (var i = 0, l = $figures.length; i < l; i++) {
        var $figure = $figures[i];
        var $images = $figure.getElementsByTagName('img');
        if ($images.length == 1) {
          var $img = $images[0];
          var width = Math.max($img.naturalWidth, $img.width);
          var height = Math.max($img.naturalHeight, $img.height);
          if (width <= 280 && (width / $figure.parentNode.offsetWidth * 100 < 50) && height < window.innerHeight * 0.9) {
            $figure.className = 'image-aside';
          } else if ($figure.className) {
            $figure.className = '';
          }
        }
      }
    };
    asideImages();
    window.onresize = asideImages;

    // Autoplay videos when in viewport
    // https://benfrain.com/automatically-play-and-pause-video-as-it-enters-and-leaves-the-viewport-screen/
    function playPauseVideo() {
      var videos = document.querySelectorAll("video");
      videos.forEach((video) => {
        video.muted = true;
        var playPromise = video.play();
        if (playPromise !== undefined) {
          playPromise.then((_) => {
            var observer = new IntersectionObserver(
              (entries) => {
                entries.forEach((entry) => {
                  if (entry.isIntersecting) {
                    video.play();
                  } else {
                    video.pause();
                  }
                });
              },
              { threshold: 0.2 }
            );
            observer.observe(video);
          });
        }
      });
    }
    playPauseVideo();
  };
  if (navigator.serviceWorker) {
    window.addEventListener('load', function () {
      navigator.serviceWorker.register('/sw.js', {
        scope: '/'
      });
    });
  }
</script>
<script data-goatcounter="https://cheeaun.goatcounter.com/count" async src="//gc.zgo.at/count.v2.js" crossorigin="anonymous" integrity="sha384-PeYXrhTyEaBBz91ANMgpSbfN1kjioQNPHNDbMvevUVLJoWrVEjDCpKb71TehNAlj"></script>
<!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "56009c05c6234036a216843af8874520"}'></script><!-- End Cloudflare Web Analytics -->
</html>